# AuthRecorder Pro v2.0.0

**Advanced Authentication Flow Capture & Replay Tool**

A comprehensive, production-ready tool for capturing, analyzing, and replaying complex authentication flows. Supports multiple browsers, MITM proxy integration, and generates production-ready scripts for various authentication mechanisms.

## üåü Features

### Core Capabilities
- **Multi-Browser Support**: Chromium, Firefox, WebKit
- **MITM Proxy Integration**: Enhanced capture with mitmproxy
- **Complex Authentication**: CSRF tokens, Bearer tokens, session cookies
- **Professional GUI**: Modern, responsive interface with live validation
- **CLI Mode**: Full automation support
- **Anti-Bot Detection**: Automatic detection of protection mechanisms
- **Batch Testing**: Credential testing with multiple accounts
- **Script Generation**: Auto-generated Python scripts for replay

### Generated Scripts
- **Requests-based**: Python requests library scripts
- **Cookie-based**: Session cookie authentication
- **Playwright**: Browser automation scripts
- **Complex Auth**: Multi-step authentication handlers

## üöÄ Quick Start

### Installation

1. **Clone or download** the AuthRecorder Pro files
2. **Run the installer**:
   ```bash
   python install.py
   ```

3. **Manual installation** (if needed):
   ```bash
   pip install requests playwright rich jinja2 tqdm
   playwright install
   pip install mitmproxy  # Optional, for MITM features
   ```

### Basic Usage

#### GUI Mode (Recommended)
```bash
python authrecorder_complete.py
```

#### CLI Mode
```bash
# Basic capture
python authrecorder_complete.py --cli --target-url https://example.com/login

# With MITM proxy
python authrecorder_complete.py --cli --target-url https://example.com/login --mitm

# With custom proxy
python authrecorder_complete.py --cli --target-url https://example.com/login --proxy http://proxy:8080

# With batch testing
python authrecorder_complete.py --cli --target-url https://example.com/login --batch credentials.txt
```

## üìñ Detailed Usage

### GUI Mode

The GUI provides a professional interface with:

#### Configuration Panel
- **Target URL**: Enter the login page URL (auto-corrects format)
- **Browser Engine**: Choose Chromium, Firefox, or WebKit
- **Proxy Settings**: MITM proxy, custom proxy, or direct connection
- **Output Directory**: Where to save captured data and scripts
- **Advanced Options**: Credentials file, protected page URL

#### Status Panel
- **Live Logs**: Real-time capture progress
- **Status Indicators**: Visual feedback on capture state
- **Progress Bar**: Shows capture progress

#### Action Buttons
- **Start Capture**: Begin authentication capture
- **Stop**: Stop current capture
- **Test URL**: Test URL connectivity
- **Clear**: Reset all fields

### CLI Mode

#### Required Arguments
- `--cli`: Enable CLI mode
- `--target-url`: Target URL to capture

#### Optional Arguments
- `--output`: Output directory (default: outputs)
- `--browser`: Browser engine (chromium, firefox, webkit)
- `--mitm`: Use MITM proxy
- `--proxy`: Custom proxy URL
- `--no-proxy`: Direct connection
- `--zip`: Create ZIP archive
- `--batch`: Credentials file for testing
- `--protected`: Protected page URL
- `--log-level`: Log level (DEBUG, INFO, WARNING, ERROR)

#### Examples

**Basic Capture**
```bash
python authrecorder_complete.py --cli --target-url https://example.com/login
```

**MITM Proxy Capture**
```bash
python authrecorder_complete.py --cli --target-url https://example.com/login --mitm
```

**Custom Proxy**
```bash
python authrecorder_complete.py --cli --target-url https://example.com/login --proxy http://proxy:8080
```

**Batch Testing**
```bash
python authrecorder_complete.py --cli --target-url https://example.com/login --batch credentials.txt --protected https://example.com/dashboard
```

**ZIP Output**
```bash
python authrecorder_complete.py --cli --target-url https://example.com/login --zip
```

## üîß Advanced Features

### Complex Authentication Handling

AuthRecorder Pro automatically detects and handles:

- **CSRF Tokens**: Multiple detection patterns
- **Bearer Tokens**: From JSON responses and headers
- **Session Cookies**: Automatic cookie management
- **Multi-step Auth**: Complex authentication flows
- **Anti-bot Protection**: Detection and handling

### Generated Scripts

#### Requests Script (`login_requests.py`)
```python
#!/usr/bin/env python3
# Auto-generated by AuthRecorder Pro v2.0.0

import requests
import re

class ComplexAuthHandler:
    def __init__(self):
        self.session = requests.Session()
        self.csrf_token = None
        self.bearer_token = None
    
    def fetch_csrf(self, url):
        # CSRF token extraction logic
        pass
    
    def login(self, username, password):
        # Complete login flow
        pass

# Usage
auth = ComplexAuthHandler()
response, session = auth.login("username", "password")
```

#### Cookie Script (`cookie_login.py`)
```python
#!/usr/bin/env python3
# Auto-generated by AuthRecorder Pro v2.0.0

import json
import requests

def load_cookies_and_test():
    session = requests.Session()
    
    with open("cookies.json", "r") as f:
        cookies = json.load(f)
    
    for cookie in cookies:
        session.cookies.set(
            cookie["name"], 
            cookie["value"], 
            domain=cookie.get("domain")
        )
    
    return session
```

### Batch Testing

Create a credentials file (`credentials.txt`):
```
username1,password1
username2,password2
username3,password3
```

Run batch test:
```bash
python authrecorder_complete.py --cli --target-url https://example.com/login --batch credentials.txt
```

## üìÅ Output Structure

```
outputs/
‚îú‚îÄ‚îÄ 2024-01-15_14-30-25/          # Timestamped capture directory
‚îÇ   ‚îú‚îÄ‚îÄ capture.json              # Complete capture data
‚îÇ   ‚îú‚îÄ‚îÄ login_requests.py         # Requests-based script
‚îÇ   ‚îú‚îÄ‚îÄ cookie_login.py           # Cookie-based script
‚îÇ   ‚îú‚îÄ‚îÄ playwright_cookie_test.py # Playwright script
‚îÇ   ‚îú‚îÄ‚îÄ cookies.json              # Captured cookies
‚îÇ   ‚îî‚îÄ‚îÄ successful_logins.txt     # Batch test results
‚îî‚îÄ‚îÄ authrecorder.log              # Application logs
```

## üõ†Ô∏è Configuration

### Environment Variables
- `AUTHRECORDER_LOG_LEVEL`: Set log level (DEBUG, INFO, WARNING, ERROR)
- `AUTHRECORDER_OUTPUT_DIR`: Default output directory

### Proxy Configuration
- **MITM Proxy**: Automatically starts mitmproxy on port 8080
- **Custom Proxy**: Supports HTTP, HTTPS, SOCKS proxies
- **No Proxy**: Direct connection bypassing all proxies

### Browser Configuration
- **Chromium**: Default, best compatibility
- **Firefox**: Alternative browser engine
- **WebKit**: Lightweight option

## üîç Troubleshooting

### Common Issues

**1. Playwright Installation**
```bash
# Reinstall Playwright
pip uninstall playwright
pip install playwright
playwright install
```

**2. MITM Proxy Issues**
```bash
# Install mitmproxy
pip install mitmproxy

# Check if port 8080 is available
netstat -an | findstr :8080
```

**3. Permission Errors**
```bash
# Run as administrator (Windows)
# Or check file permissions (Linux/Mac)
chmod +x authrecorder_complete.py
```

**4. Browser Launch Issues**
```bash
# Try different browser
python authrecorder_complete.py --cli --target-url https://example.com --browser firefox
```

### Debug Mode
```bash
python authrecorder_complete.py --cli --target-url https://example.com --log-level DEBUG
```

## üìä Performance

### System Requirements
- **Python**: 3.8 or higher
- **RAM**: 2GB minimum, 4GB recommended
- **Disk**: 100MB for installation, varies for captures
- **Network**: Stable internet connection

### Optimization Tips
- Use MITM proxy for complex sites
- Close unnecessary browser tabs during capture
- Use headless mode for CLI automation
- Monitor disk space for large captures

## üîí Security

### Data Handling
- All captured data is stored locally
- No data is sent to external servers
- Credentials are handled securely
- Generated scripts use best practices

### Privacy
- No telemetry or tracking
- Local processing only
- Configurable logging levels
- Secure credential handling

## ü§ù Contributing

### Development Setup
1. Clone the repository
2. Install development dependencies
3. Run tests
4. Submit pull requests

### Code Style
- Follow PEP 8 guidelines
- Use type hints
- Document all functions
- Include error handling

## üìÑ License

MIT License - see LICENSE file for details.

## üÜò Support

### Documentation
- This README
- Inline help (`--help`)
- Code comments
- Generated script examples

### Issues
- Check troubleshooting section
- Review logs in `outputs/authrecorder.log`
- Test with simple URLs first
- Verify dependencies

### Community
- GitHub Issues
- Discussion Forums
- Code Examples

## üéØ Use Cases

### Security Testing
- Authentication flow analysis
- Penetration testing
- Security auditing
- Vulnerability assessment

### Development
- API testing
- Integration testing
- Debugging authentication
- Script generation

### Automation
- Batch credential testing
- Automated login testing
- CI/CD integration
- Regression testing

## üîÑ Version History

### v2.0.0 (Current)
- Complete rewrite with modern architecture
- Professional GUI with live validation
- Enhanced CLI mode
- Improved script generation
- Better error handling
- MITM proxy integration
- Batch testing capabilities

### v1.x (Legacy)
- Basic capture functionality
- Simple GUI
- Limited script generation

---

**AuthRecorder Pro v2.0.0** - Advanced Authentication Capture & Replay Tool

*Built with ‚ù§Ô∏è for security professionals and developers*
